<div class="page-container">
  <app-location-filter
    [isLoading]="isLoading"
    [locationError]="locationError"
    [currentFilter]="currentFilter"
    (locationRequest)="onLocationRequest()"
    (filterChange)="onFilterChange($event)"
    (clearFiltersRequest)="onClearFilters()"
  ></app-location-filter>

  <main class="main-content">
    <div *ngIf="error" class="error-message">
      {{ error }}
    </div>

    <div class="profiles-grid">
      <div *ngIf="isLoading && !userProfiles.length" class="loading-state">
        <app-custom-spinner></app-custom-spinner>
        <p>Discovering profiles in your area...</p>
      </div>
      
      <div *ngFor="let profile of userProfiles" class="profile-card" [routerLink]="['/profile', profile._id]">
        <div class="card-background" [style.background-image]="'url(' + profile.images[0] + ')'"></div>
        <div class="glass-overlay"></div>
        
        <div class="card-content-wrapper">
          <div class="card-header">
            <div class="profile-meta">
              <h3 class="profile-name">{{ profile.fullName }}</h3>
              <p class="profile-username">{{ '@' + profile.username }}</p>
            </div>
            
            <div class="badge-container">
              <span *ngIf="profile.profileLevel === 'vip'" class="badge vip-badge">
                <i class="fas fa-star"></i> VIP
              </span>
              <span *ngIf="profile.profileLevel === 'premium'" class="badge premium-badge">
                <i class="fas fa-crown"></i> Premium
              </span>
            </div>
          </div>
          
          <div class="card-content">
            <div class="services-section">
              <i class="fas fa-briefcase"></i>
              <span class="services-list">Services: {{profile.services.included.join(', ')}}</span>
            </div>
            <div class="distance-indicator" *ngIf="userLocation && getCoordinates(profile)">
              <i class="fas fa-map-marker-alt"></i>
              <span class="distance-value">
                {{ calculateDistance(userLocation, getCoordinates(profile)) | number:'1.0-1' }}km away
              </span>
            </div>
          </div>
          
          <div class="card-footer">
            <button class="action-button" [routerLink]="['/profile', profile._id]">
              <i class="fas fa-eye"></i> View Profile
            </button>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>
